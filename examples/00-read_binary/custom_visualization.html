
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Custom Scalar Visualization &#8212; PyMAPDL Legacy Reader 0.51.3 documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-rendered-html.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Cylindrical Nodal Stress" href="load_corner_result.html" />
    <link rel="prev" title="Examples Gallery" href="../index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><style>
    .navbar-light {
        background-color: black !important;
    }
</style>

<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <img src="../../_static/pyansys-logo-black-cropped.png" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon" >
        <i class="fas fa-bars" style="color:#fff; font-size:28px;"></i>
      </span>
    </button>
    
    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../getting_started.html">Installation</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../user_guide/index.html">User Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../api/index.html">API Reference</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">Examples Gallery</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../contributing.html">Contributing</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/pyansys/PyMAPDL" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square" style="font-size:24px"></i></span>
            </a>
          </li>
        
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Custom Scalar Visualization
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="load_corner_result.html">
   Cylindrical Nodal Stress
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="load_shaft_result.html">
   Shaft Modal Analysis
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="load_thermal_result.html">
   Thermal Analysis
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="pontoon.html">
   Shell Static Analysis
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../01-cyclic_results/academic_sector_nd.html">
   Understanding Nodal Diameters from a Cyclic Model Analysis
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../01-cyclic_results/academic_sector_stress_strain.html">
   Stress and Strain from a Cyclic Modal Analysis
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../01-cyclic_results/sector_model.html">
   Cyclic Model Visualization
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Custom Scalar Visualization
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plotting">
   Plotting
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plotting-node-scalars">
   Plotting Node Scalars
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plotting-with-missing-values">
   Plotting With Missing Values
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-00-read-binary-custom-visualization-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="custom-scalar-visualization">
<span id="ref-custom-visualization"></span><span id="sphx-glr-examples-00-read-binary-custom-visualization-py"></span><h1>Custom Scalar Visualization<a class="headerlink" href="#custom-scalar-visualization" title="Permalink to this headline">¶</a></h1>
<p>Display custom scalars using an existing mesh.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyvista</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">ansys.mapdl</span> <span class="kn">import</span> <span class="n">reader</span> <span class="k">as</span> <span class="n">pymapdl_reader</span>
<span class="kn">from</span> <span class="nn">ansys.mapdl.reader</span> <span class="kn">import</span> <span class="n">examples</span>

<span class="c1"># Download an example shaft modal analysis result file</span>
<span class="n">shaft</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">download_shaft_modal</span><span class="p">()</span>
</pre></div>
</div>
<p>Each result file contains both a <code class="docutils literal notranslate"><span class="pre">mesh</span></code> property and a <code class="docutils literal notranslate"><span class="pre">grid</span></code>
property.  The <code class="docutils literal notranslate"><span class="pre">mesh</span></code> property can be through as the MAPDL
representation of the FEM while the <code class="docutils literal notranslate"><span class="pre">grid</span></code> property can be through
of the Python visualizing property used to plot within Python.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shaft.mesh:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shaft</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">79</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shaft.grid:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">shaft</span><span class="o">.</span><span class="n">grid</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>shaft.mesh:
 ANSYS Mesh
  Number of Nodes:              27132
  Number of Elements:           25051
  Number of Element Types:      6
  Number of Node Components:    4
  Number of Element Components: 3

-------------------------------------------------------------------------------
shaft.grid:
 UnstructuredGrid (0x7f8038290ac0)
  N Cells:      25051
  N Points:     27132
  X Bounds:     0.000e+00, 2.700e+02
  Y Bounds:     -4.000e+01, 4.000e+01
  Z Bounds:     -4.000e+01, 4.000e+01
  N Arrays:     16
</pre></div>
</div>
</div>
<div class="section" id="plotting">
<h1>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h1>
<p>The grid instance is a <cite>pyvista.UnstructuredGrid</cite> part of the
<cite>pyvista</cite> library.  This class allows for advanced plotting using
VTK in just a few lines of code.  For example, you can plot the
underlying mesh with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shaft</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">smooth_shading</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="custom visualization" class="sphx-glr-single-img" src="../../_images/sphx_glr_custom_visualization_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[(461.5153157248284, 326.5153157248283, 326.5153157248283),
 (135.00000000000003, 0.0, 0.0),
 (0.0, 0.0, 1.0)]
</pre></div>
</div>
</div>
<div class="section" id="plotting-node-scalars">
<h1>Plotting Node Scalars<a class="headerlink" href="#plotting-node-scalars" title="Permalink to this headline">¶</a></h1>
<p>If you point-wise or cell-wise scalars (nodes and elements in FEA),
you can plot these scalars by setting the <code class="docutils literal notranslate"><span class="pre">scalars=</span></code> parameter.
Here, I’m simply using the x location of the nodes to color the
mesh.</p>
<p>It follows that you can use any set of scalars provided that it
matches the number of nodes in the unstructured grid or the number
of cells in the unstructured grid.  Here, we’re plotting node values.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x_scalars</span> <span class="o">=</span> <span class="n">shaft</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">points</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">shaft</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">scalars</span><span class="o">=</span><span class="n">x_scalars</span><span class="p">,</span> <span class="n">smooth_shading</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="custom visualization" class="sphx-glr-single-img" src="../../_images/sphx_glr_custom_visualization_002.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[(461.5153157248284, 326.5153157248283, 326.5153157248283),
 (135.00000000000003, 0.0, 0.0),
 (0.0, 0.0, 1.0)]
</pre></div>
</div>
</div>
<div class="section" id="plotting-with-missing-values">
<h1>Plotting With Missing Values<a class="headerlink" href="#plotting-with-missing-values" title="Permalink to this headline">¶</a></h1>
<p>If you do not have values for every node (for example, the midside
nodes), you can leave these values as NAN and the plotter will take
care of plotting only the real values.</p>
<p>For example, if you have calculated strain scalars that are only
available at certain nodes, you can still plot those.  This example
just nulls out the first 2000 nodes to be able to visualize the
missing values.  If your are just missing midside values, your plot
will not show the missing values since <cite>pyvista</cite> only plots the edge
nodes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pontoon</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">download_pontoon</span><span class="p">()</span>
<span class="n">nnum</span><span class="p">,</span> <span class="n">strain</span> <span class="o">=</span> <span class="n">pontoon</span><span class="o">.</span><span class="n">nodal_elastic_strain</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">scalars</span> <span class="o">=</span> <span class="n">strain</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">scalars</span><span class="p">[:</span><span class="mi">2000</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>  <span class="c1"># here, we simulate unknown values</span>

<span class="n">pontoon</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">scalars</span><span class="o">=</span><span class="n">scalars</span><span class="p">,</span> <span class="n">show_edges</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lighting</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<img alt="custom visualization" class="sphx-glr-single-img" src="../../_images/sphx_glr_custom_visualization_003.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[(150.0152852510816, 105.0152852510816, 108.01528525108166),
 (45.000000000000014, 8.881784197001252e-16, 3.000000000000005),
 (0.0, 0.0, 1.0)]
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  4.016 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-00-read-binary-custom-visualization-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/bc5ebbdb7e9c8ac974fb708e0f25244c/custom_visualization.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">custom_visualization.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/469ea2028d4cb814c9a12a8257949d65/custom_visualization.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">custom_visualization.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="../index.html" title="previous page">Examples Gallery</a>
    <a class='right-next' id="next-link" href="load_corner_result.html" title="next page">Cylindrical Nodal Stress</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright (c) 2021 ANSYS, Inc. All rights reserved.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.2.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>