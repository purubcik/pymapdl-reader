
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Understanding Nodal Diameters from a Cyclic Model Analysis &#8212; PyMAPDL Legacy Reader 0.51.3 documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-rendered-html.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Stress and Strain from a Cyclic Modal Analysis" href="academic_sector_stress_strain.html" />
    <link rel="prev" title="Shell Static Analysis" href="../00-read_binary/pontoon.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><style>
    .navbar-light {
        background-color: black !important;
    }
</style>

<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <img src="../../_static/pyansys-logo-black-cropped.png" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon" >
        <i class="fas fa-bars" style="color:#fff; font-size:28px;"></i>
      </span>
    </button>
    
    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../getting_started.html">Installation</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../user_guide/index.html">User Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../api/index.html">API Reference</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">Examples Gallery</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../contributing.html">Contributing</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/pyansys/PyMAPDL" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square" style="font-size:24px"></i></span>
            </a>
          </li>
        
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../00-read_binary/custom_visualization.html">
   Custom Scalar Visualization
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../00-read_binary/load_corner_result.html">
   Cylindrical Nodal Stress
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../00-read_binary/load_shaft_result.html">
   Shaft Modal Analysis
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../00-read_binary/load_thermal_result.html">
   Thermal Analysis
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../00-read_binary/pontoon.html">
   Shell Static Analysis
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Understanding Nodal Diameters from a Cyclic Model Analysis
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="academic_sector_stress_strain.html">
   Stress and Strain from a Cyclic Modal Analysis
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="sector_model.html">
   Cyclic Model Visualization
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Understanding Nodal Diameters from a Cyclic Model Analysis
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rotor-sector-order">
   Rotor Sector Order
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#understanding-harmonic-indexing">
   Understanding Harmonic Indexing
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#multi-bladed-sectors">
   Multi-Bladed Sectors
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plot-the-multi-bladed-sector">
   Plot the Multi-Bladed Sector
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#traveling-wave-animation">
   Traveling Wave Animation
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-01-cyclic-results-academic-sector-nd-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="understanding-nodal-diameters-from-a-cyclic-model-analysis">
<span id="ref-academic-sector"></span><span id="sphx-glr-examples-01-cyclic-results-academic-sector-nd-py"></span><h1>Understanding Nodal Diameters from a Cyclic Model Analysis<a class="headerlink" href="#understanding-nodal-diameters-from-a-cyclic-model-analysis" title="Permalink to this headline">¶</a></h1>
<p>This example shows how to interpret modes from a cyclic analysis from
MAPDL result file from both single bladed sectors as well as
multi-bladed sectors from a modal analysis.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># sphinx_gallery_thumbnail_number = 2</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">ansys.mapdl.reader</span> <span class="kn">import</span> <span class="n">examples</span>
</pre></div>
</div>
<p>Download the academic modal analysis file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rotor</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">download_academic_rotor_result</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rotor</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>PyMAPDL Result
Units       : User Defined
Version     : 20.1
Cyclic      : True
Result Sets : 26
Nodes       : 786
Elements    : 524


Available Results:
EMS : Miscellaneous summable items (normally includes face pressures)
ENF : Nodal forces
ENS : Nodal stresses
ENG : Element energies and volume
EEL : Nodal elastic strains
ETH : Nodal thermal strains (includes swelling strains)
EUL : Element euler angles
EPT : Nodal temperatures
NSL : Nodal displacements
</pre></div>
</div>
</div>
<div class="section" id="rotor-sector-order">
<h1>Rotor Sector Order<a class="headerlink" href="#rotor-sector-order" title="Permalink to this headline">¶</a></h1>
<p>Note that the sector rotations follow the right-hand rule where the
X-axis and Y-axis make up the horizontal plane and the Z-axis is
vertical and positive upwards.  Rotation follows the right-hand
rule, which looks anti-clockwise when looking downward onto the XY
plane.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">plot_sectors</span><span class="p">(</span><span class="n">cpos</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="n">stitle</span><span class="o">=</span><span class="s1">&#39;Sector&#39;</span><span class="p">,</span> <span class="n">smooth_shading</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;bwr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.8.10/x64/lib/python3.8/site-packages/pyvista/plotting/plotting.py:1354: PyvistaDeprecationWarning:
&quot;stitle&quot; is a depreciated keyword and will be removed in a future
release.

Use ``scalar_bar_args`` instead.  For example:

scalar_bar_args={&#39;title&#39;: &#39;Scalar Bar Title&#39;}

  warnings.warn(USE_SCALAR_BAR_ARGS, PyvistaDeprecationWarning)
</pre></div>
</div>
<p>Plot Nodal Displacement</p>
<p>This modal analysis contains two modes for each harmonic index.
Since this is a 24 sector rotor, it will contain the harmonic
indices from 0 to N/2, which in this case is 12</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print the harmonic indices with</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rotor</span><span class="o">.</span><span class="n">harmonic_indices</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[  0   0  -1   1  -2   2   3  -3   4  -4   5  -5   6  -6   7  -7   8  -8
   9  -9  10 -10  11 -11  12  12]
</pre></div>
</div>
<p>You can refer to the result set either using MAPDL’s 1-based indexing
which is (Load-step, sub-step).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">plot_nodal_displacement</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">comp</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="n">cpos</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_002.png" />
<p>Alternatively, you can refer to the results using cumulative indexing.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">plot_nodal_displacement</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">comp</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="n">cpos</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_003.png" />
</div>
<div class="section" id="understanding-harmonic-indexing">
<h1>Understanding Harmonic Indexing<a class="headerlink" href="#understanding-harmonic-indexing" title="Permalink to this headline">¶</a></h1>
<p>ANSYS has great documentation on harmonic indexing within their
internal documentation, but for the sake of completeness it will be repeated here.</p>
<p>The harmonic index used within MAPDL is an integer that determines
the variation in the value of a single degree of freedom at points
spaced at a circumferential angle equal to the sector angle.</p>
<p>For this academic rotor, when the number of “blades” equals the
number of MAPDL sectors, the harmonic index will always match the
nodal diameter.  For example, the cumulative result 10 has a
harmonic index of 5:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rnum</span> <span class="o">=</span> <span class="mi">10</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Harmonic Index:&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="o">.</span><span class="n">harmonic_indices</span><span class="p">[</span><span class="n">rnum</span><span class="p">])</span>


<span class="c1"># For the purpose of illustrating the nodal diameter content, we</span>
<span class="c1"># restrict the displacement to a narrow range and force the lower and</span>
<span class="c1"># upper ranges of the plot to indicate the phase of the displacement</span>
<span class="c1">#</span>
<span class="c1"># In this plot you can clearly see that the harmonic index is indeed 5</span>
<span class="c1"># as five, and only 5 lines can be drawn through the node lines</span>
<span class="c1"># spanning the circumference of the rotor.</span>
<span class="n">r</span> <span class="o">=</span> <span class="mf">0.55</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">plot_nodal_displacement</span><span class="p">(</span><span class="n">rnum</span><span class="p">,</span> <span class="n">comp</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="n">cpos</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="n">r</span><span class="p">,</span> <span class="n">r</span> <span class="o">+</span> <span class="mf">1E-2</span><span class="p">],</span>
                                  <span class="n">stitle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_text</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;bwr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_004.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Harmonic Index: 5
/opt/hostedtoolcache/Python/3.8.10/x64/lib/python3.8/site-packages/pyvista/plotting/plotting.py:1354: PyvistaDeprecationWarning:
&quot;stitle&quot; is a depreciated keyword and will be removed in a future
release.

Use ``scalar_bar_args`` instead.  For example:

scalar_bar_args={&#39;title&#39;: &#39;Scalar Bar Title&#39;}

  warnings.warn(USE_SCALAR_BAR_ARGS, PyvistaDeprecationWarning)
</pre></div>
</div>
<p>The same can be done for the simpler nodal diameter 1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rnum</span> <span class="o">=</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rotor</span><span class="o">.</span><span class="n">harmonic_indices</span><span class="p">[</span><span class="n">rnum</span><span class="p">])</span>

<span class="n">r</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">plot_nodal_displacement</span><span class="p">(</span><span class="n">rnum</span><span class="p">,</span> <span class="n">comp</span><span class="o">=</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="n">cpos</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="n">r</span><span class="p">,</span> <span class="n">r</span> <span class="o">+</span> <span class="mf">1E-2</span><span class="p">],</span>
                                  <span class="n">add_text</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">stitle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;bwr&#39;</span><span class="p">)</span>


<span class="c1"># Therefore for this rotor with the number of sectors (N) equaling the</span>
<span class="c1"># number of blades, for each harmonic index there can only be one</span>
<span class="c1"># corresponding nodal diameter</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_005.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>1
/opt/hostedtoolcache/Python/3.8.10/x64/lib/python3.8/site-packages/pyvista/plotting/plotting.py:1354: PyvistaDeprecationWarning:
&quot;stitle&quot; is a depreciated keyword and will be removed in a future
release.

Use ``scalar_bar_args`` instead.  For example:

scalar_bar_args={&#39;title&#39;: &#39;Scalar Bar Title&#39;}

  warnings.warn(USE_SCALAR_BAR_ARGS, PyvistaDeprecationWarning)
</pre></div>
</div>
</div>
<div class="section" id="multi-bladed-sectors">
<h1>Multi-Bladed Sectors<a class="headerlink" href="#multi-bladed-sectors" title="Permalink to this headline">¶</a></h1>
<p>When there are multiple blades per sector as in the case of the
following example, the relationship between the harmonic indices and
nodal diameters becomes more complicated</p>
<p>In this case, we use the following equation described in the MAPDL
Cyclic Analysis Guide:
d = m*N ± k</p>
<p>where:
- d is the nodal diameter
- N is the number of sectors
- k is the harmonic index
- m is a set of integers from 0 to infinity</p>
<p>Therefore, for a 6 sector rotor, the first 4 possible nodal diameters at
harmonic index 1 are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">N</span> <span class="o">=</span> <span class="mi">6</span>  <span class="c1"># number of sectors</span>
<span class="n">k</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># harmonic index</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Nodal Diameters :&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%4d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">N</span> <span class="o">-</span> <span class="n">k</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%4d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">N</span> <span class="o">+</span> <span class="n">k</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Nodal Diameters :
   1
   5
   7
  11
  13
  17
  19
  23
  25
</pre></div>
</div>
<p>Normally for a rotor where the number of blades per sector is 1,
nodal diameters higher than N are simply aliased back to 1 and these
solutions do not appear in the results.  However, when the sector
contains multiple blades per sector, these results do appear in the
analysis since they are not aliased back into a repeated mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Therefore in this example part of the above modes will be</span>
<span class="c1"># back-aliased for a 24 blade, 6 sector rotor, and these can be</span>
<span class="c1"># computed with:</span>

<span class="n">n_blades</span> <span class="o">=</span> <span class="mi">24</span>  <span class="c1"># 4 blades per sector</span>
<span class="n">nodal_diameters</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">nodal_diameters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">N</span> <span class="o">-</span> <span class="n">k</span><span class="p">)</span>
    <span class="n">nodal_diameters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">N</span> <span class="o">+</span> <span class="n">k</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Nodal Diameters :&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">nodal_diameters</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="n">n_blades</span><span class="p">:</span>  <span class="c1"># ignore</span>
        <span class="k">continue</span>
    <span class="k">elif</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="n">n_blades</span><span class="o">//</span><span class="mi">2</span><span class="p">:</span>  <span class="c1"># back alias</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%4d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="o">-</span><span class="p">(</span><span class="n">n_blades</span><span class="o">-</span><span class="n">d</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%4d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Nodal Diameters :
   1
   5
   7
  11
 -11
  -7
  -5
  -1
</pre></div>
</div>
</div>
<div class="section" id="plot-the-multi-bladed-sector">
<h1>Plot the Multi-Bladed Sector<a class="headerlink" href="#plot-the-multi-bladed-sector" title="Permalink to this headline">¶</a></h1>
<p>We can verify these results by analyzing a multi-sector rotor</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">multi_blade_rotor</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">download_academic_rotor_4blade_result</span><span class="p">()</span>

<span class="c1"># plot all the sectors</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">multi_blade_rotor</span><span class="o">.</span><span class="n">plot_sectors</span><span class="p">(</span><span class="n">cpos</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="n">stitle</span><span class="o">=</span><span class="s1">&#39;Sector&#39;</span><span class="p">,</span>
                                   <span class="n">smooth_shading</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;bwr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_006.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.8.10/x64/lib/python3.8/site-packages/pyvista/plotting/plotting.py:1354: PyvistaDeprecationWarning:
&quot;stitle&quot; is a depreciated keyword and will be removed in a future
release.

Use ``scalar_bar_args`` instead.  For example:

scalar_bar_args={&#39;title&#39;: &#39;Scalar Bar Title&#39;}

  warnings.warn(USE_SCALAR_BAR_ARGS, PyvistaDeprecationWarning)
</pre></div>
</div>
<p>We can then see that the harmonic indices for harmonic index 1
indeed alias back to the expected nodal diameters in the following
plots.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">multi_blade_rotor</span><span class="o">.</span><span class="n">harmonic_indices</span><span class="p">)</span>

<span class="n">hi_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">multi_blade_rotor</span><span class="o">.</span><span class="n">harmonic_indices</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cumulative indices matching harmonic index 1:&#39;</span><span class="p">,</span> <span class="n">hi_1</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[ 0  0  0  0  0  0  0  0  1 -1  1 -1 -1  1 -1  1 -2  2 -2  2 -2  2 -2  2
  3  3  3  3  3  3  3  3]
Cumulative indices matching harmonic index 1: [ 8 10 13 15]
</pre></div>
</div>
<p>Cumulative result 8 and harmonic index 1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rnum</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Expected Nodal Diameter </span><span class="si">%2d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nodal_diameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">multi_blade_rotor</span><span class="o">.</span><span class="n">plot_nodal_displacement</span><span class="p">(</span><span class="n">rnum</span><span class="p">,</span> <span class="n">comp</span><span class="o">=</span><span class="s1">&#39;z&#39;</span><span class="p">,</span>
                                              <span class="n">cpos</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="n">r</span><span class="p">,</span> <span class="n">r</span> <span class="o">+</span> <span class="mf">1E-2</span><span class="p">],</span>
                                              <span class="n">add_text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">stitle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                              <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;bwr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_007.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.8.10/x64/lib/python3.8/site-packages/pyvista/plotting/plotting.py:1354: PyvistaDeprecationWarning:
&quot;stitle&quot; is a depreciated keyword and will be removed in a future
release.

Use ``scalar_bar_args`` instead.  For example:

scalar_bar_args={&#39;title&#39;: &#39;Scalar Bar Title&#39;}

  warnings.warn(USE_SCALAR_BAR_ARGS, PyvistaDeprecationWarning)
</pre></div>
</div>
<p>Cumulative result 10 and harmonic index 5</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rnum</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Expected Nodal Diameter </span><span class="si">%2d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nodal_diameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">multi_blade_rotor</span><span class="o">.</span><span class="n">plot_nodal_displacement</span><span class="p">(</span><span class="n">rnum</span><span class="p">,</span> <span class="n">comp</span><span class="o">=</span><span class="s1">&#39;z&#39;</span><span class="p">,</span>
                                              <span class="n">cpos</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="n">r</span><span class="p">,</span> <span class="n">r</span> <span class="o">+</span> <span class="mf">1E-2</span><span class="p">],</span>
                                              <span class="n">add_text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">stitle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                              <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;bwr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_008.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.8.10/x64/lib/python3.8/site-packages/pyvista/plotting/plotting.py:1354: PyvistaDeprecationWarning:
&quot;stitle&quot; is a depreciated keyword and will be removed in a future
release.

Use ``scalar_bar_args`` instead.  For example:

scalar_bar_args={&#39;title&#39;: &#39;Scalar Bar Title&#39;}

  warnings.warn(USE_SCALAR_BAR_ARGS, PyvistaDeprecationWarning)
</pre></div>
</div>
<p>Cumulative result 13 and harmonic index 7</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rnum</span> <span class="o">=</span> <span class="mi">13</span>
<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Expected Nodal Diameter </span><span class="si">%2d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nodal_diameters</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">multi_blade_rotor</span><span class="o">.</span><span class="n">plot_nodal_displacement</span><span class="p">(</span><span class="n">rnum</span><span class="p">,</span> <span class="n">comp</span><span class="o">=</span><span class="s1">&#39;z&#39;</span><span class="p">,</span>
                                              <span class="n">cpos</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="n">r</span><span class="p">,</span> <span class="n">r</span> <span class="o">+</span> <span class="mf">1E-2</span><span class="p">],</span>
                                              <span class="n">add_text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">stitle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                              <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;bwr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_009.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.8.10/x64/lib/python3.8/site-packages/pyvista/plotting/plotting.py:1354: PyvistaDeprecationWarning:
&quot;stitle&quot; is a depreciated keyword and will be removed in a future
release.

Use ``scalar_bar_args`` instead.  For example:

scalar_bar_args={&#39;title&#39;: &#39;Scalar Bar Title&#39;}

  warnings.warn(USE_SCALAR_BAR_ARGS, PyvistaDeprecationWarning)
</pre></div>
</div>
<p>Cumulative result 15 and harmonic index 11</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rnum</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Expected Nodal Diameter </span><span class="si">%2d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nodal_diameters</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">multi_blade_rotor</span><span class="o">.</span><span class="n">plot_nodal_displacement</span><span class="p">(</span><span class="n">rnum</span><span class="p">,</span> <span class="n">comp</span><span class="o">=</span><span class="s1">&#39;z&#39;</span><span class="p">,</span>
                                              <span class="n">cpos</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="n">r</span><span class="p">,</span> <span class="n">r</span> <span class="o">+</span> <span class="mf">1E-2</span><span class="p">],</span>
                                              <span class="n">add_text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">stitle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                              <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;bwr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_010.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.8.10/x64/lib/python3.8/site-packages/pyvista/plotting/plotting.py:1354: PyvistaDeprecationWarning:
&quot;stitle&quot; is a depreciated keyword and will be removed in a future
release.

Use ``scalar_bar_args`` instead.  For example:

scalar_bar_args={&#39;title&#39;: &#39;Scalar Bar Title&#39;}

  warnings.warn(USE_SCALAR_BAR_ARGS, PyvistaDeprecationWarning)
</pre></div>
</div>
</div>
<div class="section" id="traveling-wave-animation">
<h1>Traveling Wave Animation<a class="headerlink" href="#traveling-wave-animation" title="Permalink to this headline">¶</a></h1>
<p>You can animate the traveling wave for a cyclic result using
<code class="docutils literal notranslate"><span class="pre">animate_nodal_displacement</span></code>.  For a modal result, be sure to
modify <code class="docutils literal notranslate"><span class="pre">displacement_factor</span></code> to a value that properly scales the
modal solution.  Recall that solutions to a modal analysis from
MAPDL may or may not be scaled to unity or the mass matrix depending
on the settings within the modal analysis.</p>
<p>Set <code class="docutils literal notranslate"><span class="pre">loop=True</span></code> to allow for a continuous plot, and modify
<code class="docutils literal notranslate"><span class="pre">nangles</span></code> to allow for a smoother or faster plot.  See
<code class="docutils literal notranslate"><span class="pre">help(pyvista.plot)</span></code> for additional keyword arguments.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">animate_nodal_displacement</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">displacement_factor</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span>
                                     <span class="n">nangles</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">show_axes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span>
                                     <span class="n">loop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_text</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                     <span class="n">movie_filename</span><span class="o">=</span><span class="s1">&#39;EO3_Mode1.gif&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_011.png" />
<p>Note how you can plot the backwards traveling wave by selecting the
second mode in the mode pair <code class="docutils literal notranslate"><span class="pre">(3,</span> <span class="pre">2)</span></code> instead of <code class="docutils literal notranslate"><span class="pre">(3,</span> <span class="pre">1)</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">animate_nodal_displacement</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">displacement_factor</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span>
                                     <span class="n">nangles</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">show_axes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span>
                                     <span class="n">loop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_text</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                     <span class="n">movie_filename</span><span class="o">=</span><span class="s1">&#39;EO3_Mode1.gif&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="academic sector nd" class="sphx-glr-single-img" src="../../_images/sphx_glr_academic_sector_nd_012.png" />
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  55.650 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-01-cyclic-results-academic-sector-nd-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/c9ed20fb704a0c01197c3e73488bb440/academic_sector_nd.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">academic_sector_nd.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/953977b398920a3517c32abe3a268ddd/academic_sector_nd.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">academic_sector_nd.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="../00-read_binary/pontoon.html" title="previous page">Shell Static Analysis</a>
    <a class='right-next' id="next-link" href="academic_sector_stress_strain.html" title="next page">Stress and Strain from a Cyclic Modal Analysis</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright (c) 2021 ANSYS, Inc. All rights reserved.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.2.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>