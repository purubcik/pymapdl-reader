
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Working with a MAPDL Full File (full) &#8212; PyMAPDL Legacy Reader 0.51.3 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-rendered-html.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Compute Cell Quality" href="quality.html" />
    <link rel="prev" title="Working with a ANSYS Element Matrix File (.emat)" href="loading_emat.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><style>
    .navbar-light {
        background-color: black !important;
    }
</style>

<div class="container-xl">

    <a class="navbar-brand" href="../index.html">
    
      <img src="../_static/pyansys-logo-black-cropped.png" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon" >
        <i class="fas fa-bars" style="color:#fff; font-size:28px;"></i>
      </span>
    </button>
    
    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../getting_started.html">Installation</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="index.html">User Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../api/index.html">API Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../examples/index.html">Examples Gallery</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../contributing.html">Contributing</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/pyansys/PyMAPDL" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square" style="font-size:24px"></i></span>
            </a>
          </li>
        
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="loading_results.html">
   Reading MAPDL Result Files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="archive.html">
   Reading and Writing Mapdl Archive Files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="loading_emat.html">
   Working with a ANSYS Element Matrix File (.emat)
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Working with a MAPDL Full File (full)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="quality.html">
   Compute Cell Quality
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reading-a-full-file">
   Reading a Full File
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plotting-a-mode-shape">
   Plotting a Mode Shape
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fullfile-object-methods">
   FullFile Object Methods
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="working-with-a-mapdl-full-file-full">
<h1>Working with a MAPDL Full File (full)<a class="headerlink" href="#working-with-a-mapdl-full-file-full" title="Permalink to this headline">¶</a></h1>
<p>The MAPDL full file is a FORTRAN formatted binary file containing the
mass and stiffness from an Ansys analysis.  Using pyansys it can be
loaded into memory as either a sparse or full matrix.</p>
<div class="section" id="reading-a-full-file">
<h2>Reading a Full File<a class="headerlink" href="#reading-a-full-file" title="Permalink to this headline">¶</a></h2>
<p>This example reads in the mass and stiffness matrices associated with
the above example.  <code class="docutils literal notranslate"><span class="pre">load_km</span></code> sorts degrees of freedom such that the
nodes are ordered from minimum to maximum, and each degree of freedom
(i.e. X, Y, Z), are sorted within each node.  The matrices <code class="docutils literal notranslate"><span class="pre">k</span></code> and
<code class="docutils literal notranslate"><span class="pre">m</span></code> are sparse by default, but if <code class="docutils literal notranslate"><span class="pre">scipy</span></code> is not installed, or if
the optional parameter <code class="docutils literal notranslate"><span class="pre">as_sparse=False</span></code> then they will be full
numpy arrays.</p>
<p>By default <code class="docutils literal notranslate"><span class="pre">load_km</span></code> outputs the upper triangle of both matrices.
The constrained nodes of the analysis can be identified by accessing
<code class="docutils literal notranslate"><span class="pre">fobj.const</span></code> where the constrained degrees of freedom are True and
all others are False.  This corresponds to the degrees of reference in
<code class="docutils literal notranslate"><span class="pre">dof_ref</span></code>.</p>
<p>By default dof_ref is unsorted.  To sort these values, set
<code class="docutils literal notranslate"><span class="pre">sort==True</span></code>.  It is enabled for this example to allow for plotting
of the values later on.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansys.mapdl</span> <span class="kn">import</span> <span class="n">reader</span> <span class="k">as</span> <span class="n">pymapdl_reader</span>
<span class="kn">from</span> <span class="nn">ansys.mapdl.reader</span> <span class="kn">import</span> <span class="n">examples</span>

<span class="c1"># Create result reader object and read in full file</span>
<span class="n">full</span> <span class="o">=</span> <span class="n">pymapdl_reader</span><span class="o">.</span><span class="n">read_binary</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">fullfile</span><span class="p">)</span>
<span class="n">dof_ref</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">full</span><span class="o">.</span><span class="n">load_km</span><span class="p">(</span><span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>ANSYS only stores the upper triangular matrix in the full file.  To
create the full matrix:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">k</span> <span class="o">+=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">triu</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="n">m</span> <span class="o">+=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">triu</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
<p>If you have <code class="docutils literal notranslate"><span class="pre">scipy</span></code> installed, you can solve solve for the natural
frequencies and mode shapes of a system.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="kn">import</span> <span class="n">linalg</span>

<span class="c1"># condition the k matrix</span>
<span class="c1"># to avoid getting the &quot;Factor is exactly singular&quot; error</span>
<span class="n">k</span> <span class="o">+=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">diags</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mf">1E20</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="n">k</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># Solve</span>
<span class="n">w</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">linalg</span><span class="o">.</span><span class="n">eigsh</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">M</span><span class="o">=</span><span class="n">m</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>

<span class="c1"># System natural frequencies</span>
<span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">w</span><span class="p">))</span><span class="o">**</span><span class="mf">0.5</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;First four natural frequencies&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.3f}</span><span class="s1"> Hz&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>

<span class="n">First</span> <span class="n">four</span> <span class="n">natural</span> <span class="n">frequencies</span>
<span class="mf">1283.200</span> <span class="n">Hz</span>
<span class="mf">1283.200</span> <span class="n">Hz</span>

<span class="mf">5781.975</span> <span class="n">Hz</span>
<span class="mf">6919.399</span> <span class="n">Hz</span>
</pre></div>
</div>
</div>
<div class="section" id="plotting-a-mode-shape">
<h2>Plotting a Mode Shape<a class="headerlink" href="#plotting-a-mode-shape" title="Permalink to this headline">¶</a></h2>
<p>You can also plot the mode shape of this finite element model.  Since
the constrained degrees of freedom have been removed from the
solution, you have to account for these when displaying the
displacement.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyvista</span> <span class="k">as</span> <span class="nn">pv</span>

<span class="c1"># Get the 4th mode shape</span>
<span class="n">full_mode_shape</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="c1"># x, y, z displacement for each node</span>

<span class="c1"># reshape and compute the normalized displacement</span>
<span class="n">disp</span> <span class="o">=</span> <span class="n">full_mode_shape</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">disp</span><span class="o">*</span><span class="n">disp</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
<span class="n">n</span> <span class="o">/=</span> <span class="n">n</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="c1"># normalize</span>

<span class="c1"># load an archive file and create a vtk unstructured grid</span>
<span class="n">archive</span> <span class="o">=</span> <span class="n">pymapdl_reader</span><span class="o">.</span><span class="n">Archive</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">hexarchivefile</span><span class="p">)</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">archive</span><span class="o">.</span><span class="n">parse_vtk</span><span class="p">()</span>

<span class="c1"># plot the normalized displacement</span>
<span class="c1"># grid.plot(scalars=n)</span>

<span class="c1"># Fancy plot the displacement</span>
<span class="n">pl</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">Plotter</span><span class="p">()</span>

<span class="c1"># add the nominal mesh</span>
<span class="n">pl</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;wireframe&#39;</span><span class="p">)</span>

<span class="c1"># copy the mesh and displace it</span>
<span class="n">new_grid</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">new_grid</span><span class="o">.</span><span class="n">points</span> <span class="o">+=</span> <span class="n">disp</span><span class="o">/</span><span class="mi">80</span>
<span class="n">pl</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">new_grid</span><span class="p">,</span> <span class="n">scalars</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">stitle</span><span class="o">=</span><span class="s1">&#39;Normalized</span><span class="se">\n</span><span class="s1">Displacement&#39;</span><span class="p">,</span>
            <span class="n">flipscalars</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">pl</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="s1">&#39;Cantliver Beam 4th Mode Shape at </span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">pl</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/solved_km.png" src="../_images/solved_km.png" />
<p>This example is built into <code class="docutils literal notranslate"><span class="pre">pyansys-mapdl</span></code> and can be run from
<code class="docutils literal notranslate"><span class="pre">examples.solve_km()</span></code>.</p>
</div>
<div class="section" id="fullfile-object-methods">
<h2>FullFile Object Methods<a class="headerlink" href="#fullfile-object-methods" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ansys.mapdl.reader.full.FullFile">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ansys.mapdl.reader.full.</span></span><span class="sig-name descname"><span class="pre">FullFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ansys.mapdl.reader.full.FullFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the results of an ANSYS full file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Filename of the full file to read.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ansys.mapdl</span> <span class="kn">import</span> <span class="n">reader</span> <span class="k">as</span> <span class="n">pymapdl_reader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">full</span> <span class="o">=</span> <span class="n">pymapdl_reader</span><span class="o">.</span><span class="n">read_binary</span><span class="p">(</span><span class="s1">&#39;file.rst&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">full</span><span class="p">)</span>
<span class="go">PyMAPDL-Reader : MAPDL Full File</span>
<span class="go">Title                    : Demo</span>
<span class="go">Version                  : 20.1</span>
<span class="go">Platform                 : WINDOWS x64</span>
<span class="go">Jobname                  : file</span>
<span class="go">Matrices                 : 2</span>
<span class="go">Equations                : 345</span>
<span class="go">Nodes                    : 115</span>
<span class="go">Degrees of Freedom       : 3</span>
</pre></div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="ansys.mapdl.reader.full.FullFile.const">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">const</span></span><a class="headerlink" href="#ansys.mapdl.reader.full.FullFile.const" title="Permalink to this definition">¶</a></dt>
<dd><p>Constrained DOF
Returns the node number and DOF constrained in ANSYS.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">full</span><span class="o">.</span><span class="n">const</span>
<span class="go">array([], shape=(0, 2), dtype=int32)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ansys.mapdl.reader.full.FullFile.dof_ref">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dof_ref</span></span><a class="headerlink" href="#ansys.mapdl.reader.full.FullFile.dof_ref" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorted degree of freedom reference.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">full</span><span class="o">.</span><span class="n">dof_ref</span>
<span class="go">array([[  1,   0],</span>
<span class="go">       [  1,   1],</span>
<span class="go">       [  1,   2],</span>
<span class="go">       [115,   0],</span>
<span class="go">       [115,   1],</span>
<span class="go">       [115,   2]], dtype=int32)</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>Obtain the unsorted degree of freedom reference with
&gt;&gt;&gt; dof_ref, k, m = sparse_full.load_km(sort=False)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ansys.mapdl.reader.full.FullFile.k">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">k</span></span><a class="headerlink" href="#ansys.mapdl.reader.full.FullFile.k" title="Permalink to this definition">¶</a></dt>
<dd><p>Stiffness Matrix corresponding to sorted DOF.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ansys.mapdl</span> <span class="kn">import</span> <span class="n">reader</span> <span class="k">as</span> <span class="n">pymapdl_reader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">full</span> <span class="o">=</span> <span class="n">pymapdl_reader</span><span class="o">.</span><span class="n">read_binary</span><span class="p">(</span><span class="s1">&#39;file.rst&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">full</span><span class="o">.</span><span class="n">k</span><span class="p">)</span>
<span class="go">&lt;345x345 sparse matrix of type &#39;&lt;class &#39;numpy.float64&#39;&gt;&#39;</span>
<span class="go">        with 7002 stored elements in Compressed Sparse Column format&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ansys.mapdl.reader.full.FullFile.load_km">
<span class="sig-name descname"><span class="pre">load_km</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">as_sparse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ansys.mapdl.reader.full.FullFile.load_km" title="Permalink to this definition">¶</a></dt>
<dd><p>Load and construct mass and stiffness matrices from an
ANSYS full file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>as_sparse</strong> (<em>bool</em><em>, </em><em>optional</em>) – Outputs the mass and stiffness matrices as scipy csc
sparse arrays when True by default.</p></li>
<li><p><strong>sort</strong> (<em>bool</em><em>, </em><em>optional</em>) – Rearranges the k and m matrices such that the rows
correspond to to the sorted rows and columns in dor_ref.
Also sorts dor_ref.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>dof_ref</strong> (<em>(n x 2) np.int32 array</em>) – This array contains the node and degree corresponding to
each row and column in the mass and stiffness matrices.
In a 3 DOF analysis the dof integers will correspond to:
0 - x
1 - y
2 - z
Sort these values by node number and DOF by enabling the
sort parameter.</p></li>
<li><p><strong>k</strong> (<em>(n x n) np.float or scipy.csc array</em>) – Stiffness array</p></li>
<li><p><strong>m</strong> (<em>(n x n) np.float or scipy.csc array</em>) – Mass array</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dof_ref</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">full</span><span class="o">.</span><span class="n">load_km</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<span class="go">(0, 0)       163408119.6581276</span>
<span class="go">(0, 1)               0.0423270</span>
<span class="go">(1, 1)       163408119.6581276</span>
<span class="go">:       :</span>
<span class="go">(342, 344)     6590544.8717949</span>
<span class="go">(343, 344)    -6590544.8717950</span>
<span class="go">(344, 344)    20426014.9572689</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>Constrained entries are removed from the mass and stiffness
matrices.</p>
<p>Constrained DOF can be accessed from <code class="docutils literal notranslate"><span class="pre">const</span></code>, which returns
the node number and DOF constrained in ANSYS.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ansys.mapdl.reader.full.FullFile.load_vector">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">load_vector</span></span><a class="headerlink" href="#ansys.mapdl.reader.full.FullFile.load_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>The load vector</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">full</span><span class="o">.</span><span class="n">load_vector</span>
<span class="go">array([0., 0., 0., ..., 0., 0., 0.])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ansys.mapdl.reader.full.FullFile.m">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">m</span></span><a class="headerlink" href="#ansys.mapdl.reader.full.FullFile.m" title="Permalink to this definition">¶</a></dt>
<dd><p>Mass Matrix corresponding to sorted DOF.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">full</span><span class="o">.</span><span class="n">m</span>
<span class="go">&lt;345x345 sparse matrix of type &#39;&lt;class &#39;numpy.float64&#39;&gt;&#39;</span>
<span class="go">        with 2883 stored elements in Compressed Sparse Column format&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ansys.mapdl.reader.full.FullFile.neqn">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">neqn</span></span><a class="headerlink" href="#ansys.mapdl.reader.full.FullFile.neqn" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of equations</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">full</span><span class="o">.</span><span class="n">neqn</span>
<span class="go">963</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="loading_emat.html" title="previous page">Working with a ANSYS Element Matrix File (.emat)</a>
    <a class='right-next' id="next-link" href="quality.html" title="next page">Compute Cell Quality</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright (c) 2021 ANSYS, Inc. All rights reserved.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.2.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>